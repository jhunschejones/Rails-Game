<% if @user_game.try(:valid?) && @user_game.just_created? %>
  document.querySelector(".users").insertAdjacentHTML("beforeend", "<%= escape_javascript(render @user, locals: { game: @game }) %>");
  document.getElementsByName("user[name]")[0].value = "";
  document.getElementsByName("user[email]")[0].value = "";
<% else %>
  document.getElementsByName("user[email]")[0].value = "";
  <% if @email.blank? %>
    alert('<%= "You must enter a valid email to add a player to a game." %>');
  <% else %>
    alert('<%= "Unable to add user with email #{@email} to this game." %>');
  <% end %>
  document.getElementsByName("user[email]")[0].select();
<% end %>
